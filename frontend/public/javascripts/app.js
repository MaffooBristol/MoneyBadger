(function(){"use strict";var e=typeof window!="undefined"?window:global;if(typeof e.require=="function")return;var t={},n={},r=function(e,t){return{}.hasOwnProperty.call(e,t)},i=function(e,t){var n=[],r,i;/^\.\.?(\/|$)/.test(t)?r=[e,t].join("/").split("/"):r=t.split("/");for(var s=0,o=r.length;s<o;s++)i=r[s],i===".."?n.pop():i!=="."&&i!==""&&n.push(i);return n.join("/")},s=function(e){return e.split("/").slice(0,-1).join("/")},o=function(t){return function(n){var r=s(t),o=i(r,n);return e.require(o,t)}},u=function(e,t){var r={id:e,exports:{}};return n[e]=r,t(r.exports,o(e),r),r.exports},a=function(e,s){var o=i(e,".");s==null&&(s="/");if(r(n,o))return n[o].exports;if(r(t,o))return u(o,t[o]);var a=i(o,"./index");if(r(n,a))return n[a].exports;if(r(t,a))return u(a,t[a]);throw new Error('Cannot find module "'+e+'" from '+'"'+s+'"')},f=function(e,n){if(typeof e=="object")for(var i in e)r(e,i)&&(t[i]=e[i]);else t[e]=n},l=function(){var e=[];for(var n in t)r(t,n)&&e.push(n);return e};e.require=a,e.require.define=f,e.require.register=f,e.require.list=l,e.require.brunch=!0})(),require.register("application",function(e,t,n){var r,i,s,o;s=t("models/data-model"),i=t("collections/data-collection"),o=t("models/state-model"),n.exports=r=function(){function e(){}return e.prototype.initialize=function(){var e,n;return e=t("views/home_view"),n=t("lib/router"),this.DataCollection=new i({model:s}),this.homeView=new e({app:this}),this.State=new o,this.router=new n,typeof Object.freeze=="function"?Object.freeze(this):void 0},e}(),n.exports=new r}),require.register("collections/data-collection",function(e,t,n){var r,i,s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=t("application"),n.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.url="/get",t}(Backbone.Collection)}),require.register("initialize",function(e,t,n){var r;r=t("application"),$(function(){return r.initialize(),Backbone.history.start()})}),require.register("lib/router",function(e,t,n){var r,i,s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=t("application"),n.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.routes={"":"home"},t.prototype.home=function(){return $("body").html(i.homeView.render().el)},t}(Backbone.Router)}),require.register("lib/view_helper",function(e,t,n){}),require.register("models/collection",function(e,t,n){var r,i={}.hasOwnProperty,s=function(e,t){function r(){this.constructor=e}for(var n in t)i.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};n.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t}(Backbone.Collection)}),require.register("models/data-model",function(e,t,n){var r,i={}.hasOwnProperty,s=function(e,t){function r(){this.constructor=e}for(var n in t)i.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};n.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.defaults={Date:"01/01/1970"},t}(Backbone.Model)}),require.register("models/model",function(e,t,n){var r,i={}.hasOwnProperty,s=function(e,t){function r(){this.constructor=e}for(var n in t)i.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};n.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t}(Backbone.Model)}),require.register("models/state-model",function(e,t,n){var r,i={}.hasOwnProperty,s=function(e,t){function r(){this.constructor=e}for(var n in t)i.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};n.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.defaults={months:24},t}(Backbone.Model)}),require.register("views/chart-view",function(e,t,n){var r,i,s,o,u={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};s=t("application"),i=t("./view"),o="DD/MM/YYYY",n.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.initialize=function(e){var t=this;return this.app=e.app||{},this.collection=e.collection,this.initialCollection=_.clone(e.collection),this.app.State.on("change update",function(e){return t.render()})},t.prototype.toUnix=function(e){return moment(e,o).unix()},t.prototype.toDate=function(e){return moment.unix(e).format(o)},t.prototype.afterRender=function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w=this;b=this,console.log(this.initialCollection.models.length),this.collection.reset(this.initialCollection.models,{silent:!0}),u=this.$el,u.empty(),o=Raphael(u.get(0),u.width(),u.height()),v=this.app.State.get("months"),v>0&&(r=this.collection.filter(function(e){return w.toUnix(e.get("Date"))>w.toUnix(moment().subtract(v,"months"))}),this.collection.reset(r)),a=[],m=this.collection.pluck("Date");for(c=0,p=m.length;c<p;c++)l=m[c],a.push(this.toUnix(l));f=[],g=this.collection.pluck("Balance");for(h=0,d=g.length;h<d;h++)l=g[h],f.push(l);console.log(this.toDate(_.min(a))),console.log(this.toDate(_.max(a))),t=o.linechart(20,0,u.width()-25,u.height()-20,[a,[_.min(a),_.max(a)]],[f,[1,1]],{symbol:"circle",width:.5,smooth:!1,axis:"0 0 1 1"}).hoverColumn(function(e){var t,n;t=Math.round(this.axis),n=b.collection.find(function(e){return e.get("Date")===b.toDate(t)});if(n!=null)return $("#description").html(n.get("Date")+" : "+n.get("Description")+" / "+n.get("Value"))}),e=t.axis[0].text.items,i=0,s=e.length,y=[];while(i<s)n=e[i].attr("text"),e[i].attr("text",this.toDate(n)),y.push(i++);return y},t}(i)}),require.register("views/home_view",function(e,t,n){var r,i,s,o,u,a={}.hasOwnProperty,f=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};u=t("application"),o=t("./view"),r=t("./chart-view"),s=t("./templates/home"),n.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.id="home-view",t.prototype.template=s,t.prototype.initialize=function(e){return this.app=e.app||{}},t.prototype.events={"keyup #months":"updateMonths"},t.prototype.updateMonths=function(e){return this.app.State.set("months",$(e.target).val())},t.prototype.render=function(){var e=this;return this.app.DataCollection.fetch({success:function(t){return e.$el.html(e.template),e.chart=new r({collection:t,el:e.$el.find("#chart"),app:e.app}),e.chart.render().$el}}),this},t}(o)}),require.register("views/templates/home",function(e,t,n){n.exports=Handlebars.template(function(e,t,n,r,i){n=n||e.helpers;var s,o=this;return"<div id='description'></div>\n<div id='chart' style='width: 98%; height: 600px;'></div>\nMonths: <input type='text' id='months' value='24' />\n<input type='hidden' id='refresh' value='Refresh!' />\n"})}),require.register("views/view",function(e,t,n){var r,i=function(e,t){return function(){return e.apply(t,arguments)}},s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};t("lib/view_helper"),n.exports=r=function(e){function t(){return this.render=i(this.render,this),t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.template=function(){},t.prototype.getRenderData=function(){},t.prototype.render=function(){return this.$el.html(this.template(this.getRenderData())),this.afterRender(),this},t.prototype.afterRender=function(){},t}(Backbone.View)})